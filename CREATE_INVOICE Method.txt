METHOD CREATE_INVOICE.
  IF INVOICE_STR-INV_NO IS INITIAL.

  CALL FUNCTION 'NUMBER_GET_NEXT'
  EXPORTING
   nr_range_nr = '01'
   object = 'ZJA_INV'
IMPORTING
  NUMBER = INVOICE_NO
EXCEPTIONS
  INTERVAL_NOT_FOUND = 1
  NUMBER_RANGE_NOT_INTERN = 2
  OBJECT_NOT_FOUND = 3
  QUANTITY_IS_0 = 4
  QUANTITY_IS_NOT_1 = 5
  INTERVAL_OVERFLOW = 6
  BUFFER_OVERFLOW = 7
  OTHERS = 8
.
 IF sy-subrc <> 0.
  MESSAGE ID SY-MSGID TYPE SY-MSGTY NUMBER SY-MSGNO
     WITH SY-MSGV1 SY-MSGV2 SY-MSGV3 SY-MSGV4.
 ENDIF.
    ENDIF.
    INVOICE_STR-DOC_STATUS = 'PA'.
    INVOICE_STR-INV_NO = INVOICE_NO.
  IF INVOICE_STR IS NOT INITIAL.
  MODIFY ZJA_INVOICE FROM INVOICE_STR.
  ELSE.
    MESSAGE E004(ZJA_MSGCLASS) DISPLAY LIKE 'I'.
    ENDIF.

ENDMETHOD.